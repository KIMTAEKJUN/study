# 01. 협력하는 객체들의 공동체
> 방화벽이 화재의 확산을 막는 것이 아니라 네트워크 침입을 막는다고 해서 문제될 것이 있을까 ?  
> 실세계의 방화벽이 건물과 연관돼 있다고 해서 네트워크 방화벽이 건물과 연관될 필요가 있는가 ?

위와 같은 비유의 적절성을 떠나 소프트웨어 방화벽과 건물의 방화벽 사이의
의미적 거리만큼이나 소프트웨어 객체와 실세계 사물 사이에 존재하는 연관성은 희미하다.

**객체지향의 목표는 실세계를 모방하는 것이 아니며, 오히려 새로운 세계를 창조하는 것**이다.
소프트웨어 개발자의 역할은 단순히 실세계를 소프트웨어 안으로 옮겨 담는 것이 아니라 고객과 사용자를 만족시킬 수 있는 신세계를 창조하는 것이다.

객체지향을 실세계로 비유하는 이유는 객체지향에 대한 설명이 쉽기 때문이다. 
실세계로 비유하여 설명하게 되면 **추상화, 캡슐화, 협력** 같은 **객체지향의 핵심적인 특징**을 설명하기 매우 쉽기 때문이다.

객체를 현실 세계의 생명체에 비유하는 것은 상태와 행위를 **“캡슐화(encapsulation)”** 와 **”자율성(autonomous)”** 을 설명하는 데 효과적이며, 
서로 암묵적인 약속 아래 목표를 달성해 나가는 과정은 **“메시지(message)”** 를 주고 받으면서 공동의 목표를 달성하기 위해 **“협력(collaboration)”** 하는 객체들의 관계를 설명하는 데 적합하다. 
그리고 이런 사물을 기반으로 객체를 구현하는 개념은 객체지향 설계의 핵심 사상인 **“연결완전성(seamlessness)”** 을 설명하는데 적합하다.

<br>

## 협력하는 사람들
> 덜컹거리는 차를 정비하기 위해 들른 정비소에서도,  
> 주린 배를 채우기 위해 들어간 식당에서도,  
> 소프트웨어 개발 프로젝트가 진행되는 곳에서도,

위와 같은 사람이 사는 곳 어디에서나 **역할, 책임, 협력은 존재**한다. 
객체지향에서 가장 중요한 개념 세 가지는 **역할, 책임, 협력**이다.

### 요청과 응답으로 구성된 협력
사람들은 스스로 해결하지 못하는 문제와 마주치면 문제 해결에 필요한 지식을 알고 있거나 서비스를 제공해줄 수 있는 사람에게 도움을 **요청(request)** 한다.
요청을 받는 사람은 주어진 책임을 다하면서 필요한 지식이나 서비스를 제공하며 즉, 다른 사람의 요청에 **응답(response)** 한다.

### 역할과 책임
사람들은 다른 사람과 협력하는 과정 속에서 특정한 **역할(role)** 을 부여받으며,
역할은 어떤 협력에 참여하는 특정한 사람이 협력 안에서 차지하는 책임이나 임무를 의미한다. 
역할이라는 단어는 의미적으로 **책임(responsibility)** 이라는 개념을 내포한다. 

> 선생님이라는 역할은 학생을 가르칠 책임이 있으며,  
> 우리가 프로그래머라는 역할을 맡을 수 있는 이유는 훌륭한 프로그램을 개발할 책임을 기꺼이 받아들이기 때문이다.

위와 같이 **역할은 협력 안에서 수행하는 책임을 의미**한다.
**역할과 책임**은 **협력이 원할하게 진행되는 데 필요한 핵심적인 구성 요소**다.

객체의 역할 또한 사람의 역할과 유사하게 다음과 같은 특징을 가진다.
- 여러 사람이 동일한 역할을 수행할 수 있다.
- 역할은 대체 가능성을 의미한다. -> **대체 가능(substitutable)**
- 책임을 수행하는 방법은 자율적으로 선택할 수 있다. -> **다형성(polymorphism)**
- 한 사람이 동시에 여러 역할을 수행할 수 있다.

<br>

## 역할, 책임, 협력
### 기능을 구현하기 위해 협력하는 객체들
> 사람이라는 단어를 **객체**로,  
> 에이전트의 요청을 **메시지**로,  
> 에이전트가 요청을 처리하는 방법을 **메서드**로,

위와 같이 비유하면 객체지향의 핵심 개념을 설명하는 것이 쉬워지며,
사람들이 객체지향을 설명하기 위해 실세계의 모방이라는 은유를 차용하는 이유이다.

### 역할과 책임을 수행하며 협력하는 객체들
사람들은 특정한 목표를 이루기 위해 서로 협력하며, 
협력의 핵심은 특정한 책임을 수행하는 역할들 간의 연쇄적인 요청과 응답을 통해 목표를 달성한다는 것이다.

> "어떤 객체도 섬이 아니다."
- 객체는 공동체 안에 살고 있는 성실한 객체 시민은 자신에게 주어진 역할과 책임을 다하는 동시에 시스템의 더 큰 목적을 이루기 위해 다른 객체와도 적극적으로 협력한다.
- 애플리케이션의 기능은 더 작은 책임으로 분할되고 책임은 적절한 역할을 수행할 수 있는 객체에 의해 수행되며, 시스템의 기능은 객체 간의 연쇄적인 요청과 응답의 흐름으로 구성된 협력으로 구현된다.

**역할은 관련성 높은 책임의 집합**이며,
객체의 역할을 사람의 역할과 유사하게 아래와 같은 특징을 지닌다.
- 여러 객체가 동일한 역할을 수행할 수 있다.
- 역할은 대체 가능성을 의미한다.
- 각 객체는 책임을 수행하는 방법을 자율적으로 선택할 수 있다.
- 하나의 객체가 동시에 여러 역할을 수행할 수 있다.

**역할은 유연하고 재사용 가능한 협력 관계를 구축하는 데 중요한 설계 요소**며,
**대체 가능한 역할과 책임은 객체지향 패러다임이 중요한 기반을 제공하는 다형성과도 깊이 연관**돼있다.

<br>

## 협력 속에 사는 객체
일반적으로 객체는 다른 객체와의 협력을 통해 기능을 구현하게 된다.

결국 **협력의 품질을 결정하는 것은 객체의 품질**이며,
협력 공동체의 일원으로서 **객체는 다음과 같은 두 가지 덕목**을 갖춰야 한다.

첫째, 객체는 충분히 **"협력적"** 이어야 한다.
외부의 도움을 무시한 채 모든 것을 스스로 처리하려 하면 내부적인 복잡도에 의해 자멸하고 만다.

두번째, 객체는 충분히 **"자율적"** 이어야 한다.
요청에 대해 스스로 판단하고 행동해야 한다.

### 상태와 행동을 함께 지닌 자율적인 객체
흔히 객체는 **상태(state)** 와 **행동(behavior)** 을 함께 지닌 실체라고 정의하며,
객체가 협력에 참여하기 위해 어떤 행동을 해야 한다면 그 행동을 하는 데 필요한 상태도 함께 지니고 있어야 한다는 것을 의미하고
객체가 협력에 참여하는 과정 속에서 스스로 판단하고 스스로 결정하는 자율적인 존재로 남기 위해서는 필요한 행동과 상태를 함께 지니고 있어야 한다.

**객체의 자율성은 객체의 내부와 외부를 명확하게 구분하는 것**으로부터 나온다.
사적인 부분은 간섭할 수 없도록 외부에서 차단해야 하며, 접근이 허락된 수단을 통해서만 다른 객체와 의사소통해야 한다.

객체는 다른 객체가 **"무엇(what)** 을 수행하는지는 알 수 있지만 **"어떻게(how)"** 수행하는지에 대해서는 알 수 없다.

객체는 행동을 위해 필요한 상태를 포함하는 동시에 특정한 행동을 수행하는 방법을 스스로 결정할 수 있어야 한다.
따라서 **객체는 상태와 행위를 단위로 묶는 자율적인 존재**다.

### 협력과 메시지
풍부한 메커니즘을 이용해 요청하고 응답할 수 있는 인간들의 세계와 달리 **객체지향의 세계에서는 오직 한 가지 의사소통 수단**만이 존재한다. 이를 **메시지(message)** 라고 한다.

**한 객체가 다른 객체에게 요청하는 것을 메세지를 전송하는 것**이고, **다른 객체로부터 요청을 받는 것이 메시지를 수신**한다고 말한다.

객체지향의 세계에서 협력은 메세지를 전송하는 객체와 메세지를 수신하는 객체 사이의 관계로 구성되며,
이때 메시지를 전송하는 객체를 **송신자(sender)** 라고 부르고 메시지를 수신하는 객체를 **수신자(receiver)** 라고 부른다.

### 메서드와 자율성
객체가 수신된 메시지를 처리하는 방법을 **메서드(method)** 라고 부른다.
따라서 어떤 객체에게 메시지를 전송하면 결과적으로 메시지에 대응되는 특정 메서드가 실행된다.

객체는 자신의 상태에 따라 특정 메서드를 선택하고 실행할 수 있으며,
각 메서드를 분리하는 것은 객체의 자율성을 높이는 핵심 메커니즘이다. 이것은 **캡슐화(encapsulation)** 라는 개념과도 깊이 관련돼 있다.